<script>
    window.fbAsyncInit = function() {
        FB.init({
            appId      : '444076535464757',  // معرف التطبيق
            cookie     : true,
            xfbml      : true,
            version    : 'v17.0'
        });

        FB.AppEvents.logPageView();   
    };

    (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement(s); js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>

<!-- زر تسجيل الدخول -->
<button onclick="facebookLogin()">تسجيل الدخول باستخدام فيسبوك</button>

<!-- عرض الحسابات في قسم منفصل -->
<div id="accountsContainer"></div>

<script>
    // تسجيل الدخول إلى فيسبوك
    function facebookLogin() {
        FB.login(function(response) {
            if (response.authResponse) {
                console.log('تم تسجيل الدخول بنجاح!');
                FB.api('/me', {fields: 'name,email,picture'}, function(user) {
                    console.log('مرحبًا ' + user.name);
                    console.log('بريدك الإلكتروني: ' + user.email);
                    console.log('صورتك: ' + user.picture.data.url);

                    // حفظ بيانات الحساب في LocalStorage
                    let accounts = JSON.parse(localStorage.getItem('facebookAccounts')) || [];
                    accounts.push({
                        name: user.name,
                        email: user.email,
                        picture: user.picture.data.url
                    });

                    localStorage.setItem('facebookAccounts', JSON.stringify(accounts));

                    // تحديث عرض الحسابات
                    displayAccounts();
                });
            } else {
                console.log('لم يتم تسجيل الدخول.');
            }
        }, {scope: 'email,public_profile'});
    }

    // عرض الحسابات المخزنة
    function displayAccounts() {
        let accounts = JSON.parse(localStorage.getItem('facebookAccounts')) || [];
        let accountsContainer = document.getElementById('accountsContainer');
        accountsContainer.innerHTML = ''; // مسح الحسابات الحالية قبل إضافة الجديدة

        accounts.forEach(account => {
            let accountDiv = document.createElement('div');
            accountDiv.classList.add('account');
            accountDiv.innerHTML = `
                <img src="${account.picture}" alt="${account.name}" />
                <p>${account.name}</p>
                <a href="https://www.facebook.com/${account.email}" target="_blank">فتح الحساب في نافذة جديدة</a>
            `;
            accountsContainer.appendChild(accountDiv);
        });
    }

    // استرجاع الحسابات عند تحميل الصفحة
    window.onload = displayAccounts;
        </script>
